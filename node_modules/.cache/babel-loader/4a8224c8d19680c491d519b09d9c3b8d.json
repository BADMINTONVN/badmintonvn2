{"ast":null,"code":"import _defineProperty from\"C:/Users/Adddmin/Documents/badmintonvn2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:/Users/Adddmin/Documents/badmintonvn2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _objectWithoutProperties from\"C:/Users/Adddmin/Documents/badmintonvn2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import _classCallCheck from\"C:/Users/Adddmin/Documents/badmintonvn2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/Adddmin/Documents/badmintonvn2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/Adddmin/Documents/badmintonvn2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/Adddmin/Documents/badmintonvn2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";var _excluded=[\"forwardRef\"];import React,{Component,Fragment}from'react';import{Link,withRouter}from'react-router-dom';import{FormattedMessage}from'react-intl';import{connect}from'react-redux';import'./Navigator.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MenuGroup=/*#__PURE__*/function(_Component){_inherits(MenuGroup,_Component);var _super=_createSuper(MenuGroup);function MenuGroup(){_classCallCheck(this,MenuGroup);return _super.apply(this,arguments);}_createClass(MenuGroup,[{key:\"render\",value:function render(){var _this$props=this.props,name=_this$props.name,children=_this$props.children;return/*#__PURE__*/_jsxs(\"li\",{className:\"menu-group\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"menu-group-name\",children:/*#__PURE__*/_jsx(FormattedMessage,{id:name})}),/*#__PURE__*/_jsx(\"ul\",{className:\"menu-list list-unstyled\",children:children})]});}}]);return MenuGroup;}(Component);var Menu=/*#__PURE__*/function(_Component2){_inherits(Menu,_Component2);var _super2=_createSuper(Menu);function Menu(){_classCallCheck(this,Menu);return _super2.apply(this,arguments);}_createClass(Menu,[{key:\"render\",value:function render(){var _this$props2=this.props,name=_this$props2.name,active=_this$props2.active,link=_this$props2.link,children=_this$props2.children,onClick=_this$props2.onClick,hasSubMenu=_this$props2.hasSubMenu,onLinkClick=_this$props2.onLinkClick;return/*#__PURE__*/_jsx(\"li\",{className:\"menu\"+(hasSubMenu?\" has-sub-menu\":\"\")+\"\"+(active?\" active\":\"\"),children:hasSubMenu?/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsxs(\"span\",{\"data-toggle\":\"collapse\",className:\"menu-link collapsed\",onClick:onClick,\"aria-expanded\":\"false\",children:[/*#__PURE__*/_jsx(FormattedMessage,{id:name}),/*#__PURE__*/_jsx(\"div\",{className:\"icon-right\",children:/*#__PURE__*/_jsx(\"i\",{className:\"far fa-angle-right\"})})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"ul\",{className:\"sub-menu-list list-unstyled\",children:children})})]}):/*#__PURE__*/_jsx(Link,{to:link,className:\"menu-link\",onClick:onLinkClick,children:/*#__PURE__*/_jsx(FormattedMessage,{id:name})})});}}]);return Menu;}(Component);var SubMenu=/*#__PURE__*/function(_Component3){_inherits(SubMenu,_Component3);var _super3=_createSuper(SubMenu);function SubMenu(){var _this;_classCallCheck(this,SubMenu);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super3.call.apply(_super3,[this].concat(args));_this.getItemClass=function(path){return _this.props.location.pathname===path?\"active\":\"\";};return _this;}_createClass(SubMenu,[{key:\"render\",value:function render(){var _this$props3=this.props,name=_this$props3.name,link=_this$props3.link,onLinkClick=_this$props3.onLinkClick;return/*#__PURE__*/_jsx(\"li\",{className:\"sub-menu \"+this.getItemClass(link),children:/*#__PURE__*/_jsx(Link,{to:link,className:\"sub-menu-link\",onClick:onLinkClick,children:/*#__PURE__*/_jsx(FormattedMessage,{id:name})})});}}]);return SubMenu;}(Component);var MenuGroupWithRouter=withRouter(MenuGroup);var MenuWithRouter=withRouter(Menu);var SubMenuWithRouter=withRouter(SubMenu);var withRouterInnerRef=function withRouterInnerRef(WrappedComponent){var InnerComponentWithRef=/*#__PURE__*/function(_React$Component){_inherits(InnerComponentWithRef,_React$Component);var _super4=_createSuper(InnerComponentWithRef);function InnerComponentWithRef(){_classCallCheck(this,InnerComponentWithRef);return _super4.apply(this,arguments);}_createClass(InnerComponentWithRef,[{key:\"render\",value:function render(){var _this$props4=this.props,forwardRef=_this$props4.forwardRef,rest=_objectWithoutProperties(_this$props4,_excluded);return/*#__PURE__*/_jsx(WrappedComponent,_objectSpread(_objectSpread({},rest),{},{ref:forwardRef}));}}]);return InnerComponentWithRef;}(React.Component);var ComponentWithRef=withRouter(InnerComponentWithRef,{withRef:true});return/*#__PURE__*/React.forwardRef(function(props,ref){return/*#__PURE__*/_jsx(ComponentWithRef,_objectSpread(_objectSpread({},props),{},{forwardRef:ref}));});};var Navigator=/*#__PURE__*/function(_Component4){_inherits(Navigator,_Component4);var _super5=_createSuper(Navigator);function Navigator(){var _this2;_classCallCheck(this,Navigator);for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2];}_this2=_super5.call.apply(_super5,[this].concat(args));_this2.state={expandedMenu:{}};_this2.toggle=function(groupIndex,menuIndex){var expandedMenu={};var needExpand=!(_this2.state.expandedMenu[groupIndex+'_'+menuIndex]===true);if(needExpand){expandedMenu[groupIndex+'_'+menuIndex]=true;}_this2.setState({expandedMenu:expandedMenu});};_this2.isMenuHasSubMenuActive=function(location,subMenus,link){if(subMenus){if(subMenus.length===0){return false;}var currentPath=location.pathname;for(var i=0;i<subMenus.length;i++){var subMenu=subMenus[i];if(subMenu.link===currentPath){return true;}}}if(link){return _this2.props.location.pathname===link;}return false;};_this2.checkActiveMenu=function(){var _this2$props=_this2.props,menus=_this2$props.menus,location=_this2$props.location;outerLoop:for(var i=0;i<menus.length;i++){var group=menus[i];if(group.menus&&group.menus.length>0){for(var j=0;j<group.menus.length;j++){var menu=group.menus[j];if(menu.subMenus&&menu.subMenus.length>0){if(_this2.isMenuHasSubMenuActive(location,menu.subMenus,null)){var key=i+'_'+j;_this2.setState({expandedMenu:_defineProperty({},key,true)});break outerLoop;}}}}}};return _this2;}_createClass(Navigator,[{key:\"componentDidMount\",value:function componentDidMount(){this.checkActiveMenu();}},{key:\"componentDidUpdate\",value:// componentWillReceiveProps(nextProps, prevState) {\n//     const { location, setAccountMenuPath, setSettingMenuPath } = this.props;\n//     const { location: nextLocation } = nextProps;\n//     if (location !== nextLocation) {\n//         let pathname = nextLocation && nextLocation.pathname;\n//         if ((pathname.startsWith('/account/') || pathname.startsWith('/fds/account/'))) {\n//             setAccountMenuPath(pathname);\n//         }\n//         if (pathname.startsWith('/settings/')) {\n//             setSettingMenuPath(pathname);\n//         };\n//     };\n// };\nfunction componentDidUpdate(prevProps,prevState){var location=this.props.location;var prevLocation=prevProps.location;if(location!==prevLocation){this.checkActiveMenu();};}},{key:\"render\",value:function render(){var _this3=this;var _this$props5=this.props,menus=_this$props5.menus,location=_this$props5.location,onLinkClick=_this$props5.onLinkClick;return/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsx(\"ul\",{className:\"navigator-menu list-unstyled\",children:menus.map(function(group,groupIndex){return/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsx(MenuGroupWithRouter,{name:group.name,children:group.menus?group.menus.map(function(menu,menuIndex){var isMenuHasSubMenuActive=_this3.isMenuHasSubMenuActive(location,menu.subMenus,menu.link);var isSubMenuOpen=_this3.state.expandedMenu[groupIndex+'_'+menuIndex]===true;return/*#__PURE__*/_jsx(MenuWithRouter,{active:isMenuHasSubMenuActive,name:menu.name,link:menu.link,hasSubMenu:menu.subMenus,isOpen:isSubMenuOpen,onClick:function onClick(){return _this3.toggle(groupIndex,menuIndex);},onLinkClick:onLinkClick,children:menu.subMenus&&menu.subMenus.map(function(subMenu,subMenuIndex){return/*#__PURE__*/_jsx(SubMenuWithRouter,{name:subMenu.name,link:subMenu.link,onClick:_this3.closeOtherExpand,onLinkClick:onLinkClick},subMenuIndex);})},menuIndex);}):null})},groupIndex);})})});}}]);return Navigator;}(Component);var mapStateToProps=function mapStateToProps(state){return{};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{};};export default withRouterInnerRef(connect(mapStateToProps,mapDispatchToProps)(Navigator));","map":{"version":3,"sources":["C:/Users/Adddmin/Documents/badmintonvn2/src/components/Navigator.js"],"names":["React","Component","Fragment","Link","withRouter","FormattedMessage","connect","MenuGroup","props","name","children","Menu","active","link","onClick","hasSubMenu","onLinkClick","SubMenu","getItemClass","path","location","pathname","MenuGroupWithRouter","MenuWithRouter","SubMenuWithRouter","withRouterInnerRef","WrappedComponent","InnerComponentWithRef","forwardRef","rest","ComponentWithRef","withRef","ref","Navigator","state","expandedMenu","toggle","groupIndex","menuIndex","needExpand","setState","isMenuHasSubMenuActive","subMenus","length","currentPath","i","subMenu","checkActiveMenu","menus","outerLoop","group","j","menu","key","prevProps","prevState","prevLocation","map","isSubMenuOpen","subMenuIndex","closeOtherExpand","mapStateToProps","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from 'react';\r\nimport { Link, withRouter } from 'react-router-dom';\r\nimport { FormattedMessage } from 'react-intl';\r\nimport { connect } from 'react-redux';\r\n\r\nimport './Navigator.scss';\r\n\r\nclass MenuGroup extends Component {\r\n\r\n    render() {\r\n        const { name, children } = this.props;\r\n        return (\r\n            <li className=\"menu-group\">\r\n                <div className=\"menu-group-name\">\r\n                    <FormattedMessage id={name} />\r\n                </div>\r\n                <ul className=\"menu-list list-unstyled\">\r\n                    {children}\r\n                </ul>\r\n            </li>\r\n        );\r\n    }\r\n}\r\n\r\nclass Menu extends Component {\r\n\r\n    render() {\r\n        const { name, active, link, children, onClick, hasSubMenu, onLinkClick } = this.props;\r\n        return (\r\n            <li className={\"menu\" + (hasSubMenu ? \" has-sub-menu\" : \"\") + (\"\") + (active ? \" active\" : \"\")}>\r\n                {hasSubMenu ? (\r\n                    <Fragment>\r\n                        <span\r\n                            data-toggle=\"collapse\"\r\n                            className={\"menu-link collapsed\"}\r\n                            onClick={onClick}\r\n                            aria-expanded={\"false\"}\r\n                        >\r\n                            <FormattedMessage id={name} />\r\n                            <div className=\"icon-right\">\r\n                                <i className={\"far fa-angle-right\"} />\r\n                            </div>\r\n                        </span>\r\n                        <div>\r\n                            <ul className=\"sub-menu-list list-unstyled\">\r\n                                {children}\r\n                            </ul>\r\n                        </div>\r\n                    </Fragment>\r\n                ) : (\r\n                        <Link to={link} className=\"menu-link\" onClick={onLinkClick}>\r\n                            <FormattedMessage id={name} />\r\n                        </Link>\r\n                    )}\r\n            </li>\r\n        );\r\n    }\r\n}\r\n\r\nclass SubMenu extends Component {\r\n\r\n    getItemClass = path => {\r\n        return this.props.location.pathname === path ? \"active\" : \"\";\r\n    };\r\n\r\n    render() {\r\n        const { name, link, onLinkClick } = this.props;\r\n        return (\r\n            <li className={\"sub-menu \" + this.getItemClass(link)}>\r\n                <Link to={link} className=\"sub-menu-link\" onClick={onLinkClick}>\r\n                    <FormattedMessage id={name} />\r\n                </Link>\r\n            </li>\r\n        );\r\n    }\r\n}\r\n\r\nconst MenuGroupWithRouter = withRouter(MenuGroup);\r\nconst MenuWithRouter = withRouter(Menu);\r\nconst SubMenuWithRouter = withRouter(SubMenu);\r\n\r\nconst withRouterInnerRef = (WrappedComponent) => {\r\n\r\n    class InnerComponentWithRef extends React.Component {\r\n        render() {\r\n            const { forwardRef, ...rest } = this.props;\r\n            return <WrappedComponent {...rest} ref={forwardRef} />;\r\n        }\r\n    }\r\n\r\n    const ComponentWithRef = withRouter(InnerComponentWithRef, { withRef: true });\r\n\r\n    return React.forwardRef((props, ref) => {\r\n        return <ComponentWithRef {...props} forwardRef={ref} />;\r\n    });\r\n};\r\n\r\nclass Navigator extends Component {\r\n    state = {\r\n        expandedMenu: {}\r\n    };\r\n\r\n    toggle = (groupIndex, menuIndex) => {\r\n        const expandedMenu = {};\r\n        const needExpand = !(this.state.expandedMenu[groupIndex + '_' + menuIndex] === true);\r\n        if (needExpand) {\r\n            expandedMenu[groupIndex + '_' + menuIndex] = true;\r\n        }\r\n\r\n        this.setState({\r\n            expandedMenu: expandedMenu\r\n        });\r\n    };\r\n\r\n    isMenuHasSubMenuActive = (location, subMenus, link) => {\r\n        if (subMenus) {\r\n            if (subMenus.length === 0) {\r\n                return false;\r\n            }\r\n\r\n            const currentPath = location.pathname;\r\n            for (let i = 0; i < subMenus.length; i++) {\r\n                const subMenu = subMenus[i];\r\n                if (subMenu.link === currentPath) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (link) {\r\n            return this.props.location.pathname === link;\r\n        }\r\n\r\n        return false;\r\n    };\r\n\r\n    checkActiveMenu = () => {\r\n        const { menus, location } = this.props;\r\n        outerLoop:\r\n        for (let i = 0; i < menus.length; i++) {\r\n            const group = menus[i];\r\n            if (group.menus && group.menus.length > 0) {\r\n                for (let j = 0; j < group.menus.length; j++) {\r\n                    const menu = group.menus[j];\r\n                    if (menu.subMenus && menu.subMenus.length > 0) {\r\n                        if (this.isMenuHasSubMenuActive(location, menu.subMenus, null)) {\r\n                            const key = i + '_' + j;\r\n                            this.setState({\r\n                                expandedMenu: {\r\n                                    [key]: true\r\n                                }\r\n                            });\r\n                            break outerLoop;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    componentDidMount() {\r\n        this.checkActiveMenu();\r\n    };\r\n\r\n    // componentWillReceiveProps(nextProps, prevState) {\r\n    //     const { location, setAccountMenuPath, setSettingMenuPath } = this.props;\r\n    //     const { location: nextLocation } = nextProps;\r\n    //     if (location !== nextLocation) {\r\n    //         let pathname = nextLocation && nextLocation.pathname;\r\n    //         if ((pathname.startsWith('/account/') || pathname.startsWith('/fds/account/'))) {\r\n    //             setAccountMenuPath(pathname);\r\n    //         }\r\n    //         if (pathname.startsWith('/settings/')) {\r\n    //             setSettingMenuPath(pathname);\r\n    //         };\r\n    //     };\r\n    // };\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        const { location } = this.props;\r\n        const { location: prevLocation } = prevProps;\r\n        if (location !== prevLocation) {\r\n            this.checkActiveMenu();\r\n        };\r\n    };\r\n\r\n    render() {\r\n        const { menus, location, onLinkClick } = this.props;\r\n        return (\r\n            <Fragment>\r\n                <ul className=\"navigator-menu list-unstyled\">\r\n                    {\r\n                        menus.map((group, groupIndex) => {\r\n                            return (\r\n                                <Fragment key={groupIndex}>\r\n                                    <MenuGroupWithRouter name={group.name}>\r\n                                        {group.menus ? (\r\n                                            group.menus.map((menu, menuIndex) => {\r\n                                                const isMenuHasSubMenuActive = this.isMenuHasSubMenuActive(location, menu.subMenus, menu.link);\r\n                                                const isSubMenuOpen = this.state.expandedMenu[groupIndex + '_' + menuIndex] === true;\r\n                                                return (\r\n                                                    <MenuWithRouter\r\n                                                        key={menuIndex}\r\n                                                        active={isMenuHasSubMenuActive}\r\n                                                        name={menu.name}\r\n                                                        link={menu.link}\r\n                                                        hasSubMenu={menu.subMenus}\r\n                                                        isOpen={isSubMenuOpen}\r\n                                                        onClick={() => this.toggle(groupIndex, menuIndex)}\r\n                                                        onLinkClick={onLinkClick}\r\n                                                    >\r\n                                                        {menu.subMenus && menu.subMenus.map((subMenu, subMenuIndex) => (\r\n                                                            <SubMenuWithRouter\r\n                                                                key={subMenuIndex}\r\n                                                                name={subMenu.name}\r\n                                                                link={subMenu.link}\r\n                                                                onClick={this.closeOtherExpand}\r\n                                                                onLinkClick={onLinkClick}\r\n                                                            />\r\n                                                        ))}\r\n                                                    </MenuWithRouter>\r\n                                                );\r\n                                            })\r\n                                        ) : null}\r\n                                    </MenuGroupWithRouter>\r\n                                </Fragment>\r\n                            );\r\n                        })\r\n                    }\r\n                </ul>\r\n            </Fragment>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n    }\r\n}\r\n\r\nexport default withRouterInnerRef(connect(mapStateToProps, mapDispatchToProps)(Navigator));\r\n"]},"metadata":{},"sourceType":"module"}